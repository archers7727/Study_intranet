# 태그 기반 교육 관리 시스템 기능 명세서

이 문서는 시스템의 핵심 기능 중 학생 관리, 클래스 관리, 태그 관리, 그리고 세션 관리에 대한 상세 기능을 설명합니다.

---

## 1. 학생 관리 (Student Management)

학생 관리 모듈은 원생의 기본 정보, 수강 이력, 과제 현황 및 보호자 연락처를 통합 관리합니다.

### 1.1 학생 목록 및 검색
*   **통합 검색:** 학생 이름 또는 학교명을 기반으로 실시간 필터링을 지원합니다.
*   **반응형 뷰:** 데스크톱에서는 상세 테이블 뷰를, 모바일에서는 카드 형태의 요약 뷰를 제공합니다.
*   **상태 표시기:** 
    *   **재원 상태:** 재원(Enrolled), 대기(Waiting), 퇴원(Left) 상태를 칩 형태로 시각화합니다.
    *   **관리 상태:** 정상(Normal), 주의(Caution) 상태를 구분하여 집중 관리가 필요한 학생을 식별합니다.

### 1.2 학생 등록 및 수정
*   **자동 ID 생성:** 이름과 연락처 끝 5자리를 조합하여 고유 학생 ID를 자동 생성합니다. (예: 홍길동12345)
*   **자동 비밀번호 설정:** 생년월일 6자리와 성별 코드(남:3, 여:4)를 조합하여 초기 비밀번호를 생성합니다.
*   **학년 자동 계산:** 생년월일을 입력하면 한국 나이 기준 초/중/고 학년이 자동으로 계산됩니다.
*   **보호자 연동:** 기존 보호자 DB에서 검색하여 연결하거나, 신규 보호자 정보를 즉시 등록하여 연결할 수 있습니다.
*   **태그 할당:** 학생의 성향, 수준, 특이사항 등을 태그로 분류하여 관리합니다.

### 1.3 학생 상세 정보 (프로필)
*   **수강 이력:** 참여 중인 클래스별 출석률과 일자별 상세 출결 로그(출석/결석)를 아코디언 형태로 제공합니다.
*   **과제 내역:** 부여된 모든 과제의 상태(미제출, 제출, 채점완료)와 점수, 제출일을 리스트로 확인합니다.
*   **상태 변경 이력:** 학생의 관리 상태(정상/주의)가 변경된 날짜, 사유, 변경 주체를 타임라인으로 기록합니다.

### 1.4 연락처 관리
*   **통합 연락처 리스트:** 학생과 보호자의 연락처를 가나다순으로 통합 제공합니다.
*   **관계 표시:** 보호자의 경우 어떤 학생의 부/모인지 명시합니다.
*   **원클릭 복사:** 연락처 옆의 복사 버튼을 통해 클립보드로 전화번호를 즉시 복사할 수 있습니다.

---

## 2. 클래스 관리 (Class Management)

클래스 관리는 수업의 운영 형태, 배정 교사, 수강생 및 반복 일정을 정의합니다.

### 2.1 클래스 운영 및 관리
*   **담당 교사 배정:** 주교사(Main Teacher) 1인과 복수의 보조교사(Assistant Teacher)를 지정할 수 있습니다.
*   **클래스 복사:** 기존 클래스의 설정(교사, 학생, 태그, 일정 등)을 그대로 복제하여 유사한 신규 클래스를 빠르게 생성합니다.
*   **비용 및 설명 관리:** 수강료 및 클래스 커리큘럼 상세 설명을 관리합니다.

### 2.2 일정 및 세션 생성
*   **반복 일정 설정:** 요일별 시작 시간과 종료 시간을 복수로 설정하여 정규 수업 일정을 정의합니다.
*   **세션 자동 생성 도구:** 정의된 반복 일정을 바탕으로 향후 3개월간의 수업 세션을 일괄 생성합니다. 생성 전 특정 날짜의 세션을 제외하거나 포함하는 선택적 생성이 가능합니다.

---

## 3. 태그 관리 시스템 (Tag Suite)

시스템 전반에서 데이터 분류 및 검색의 핵심 역할을 하는 중앙 집중형 태그 관리 도구입니다.

### 3.1 태그 현황 대시보드
*   **핵심 지표:** 총 태그 수, 총 자료 수, 태그 미지정 자료 수, 자료당 평균 태그 수 등 통계 데이터를 제공합니다.
*   **사용량 분석:** 가장 많이 사용된 태그 TOP 5를 차트 형태로 시각화하여 주요 키워드를 파악합니다.

### 3.2 태그 관리 및 생성
*   **커스텀 컬러:** 컬러 피커(Color Picker)를 통해 각 태그에 고유 색상을 부여하여 가독성을 높입니다.
*   **실시간 검색:** 생성된 태그 리스트를 이름으로 빠르게 검색합니다.
*   **사용량 추적:** 각 태그가 몇 개의 데이터(학생, 클래스, 세션, 자료)에 연결되어 있는지 실시간으로 카운트하여 표시합니다.

### 3.3 태그 기반 데이터 검색
*   **다중 필터링:** 복수의 태그를 선택하여 정교한 데이터 검색이 가능합니다.
*   **논리 연산 지원:** 선택한 태그들을 모두 포함하는 자료를 찾는 **AND** 로직과, 하나라도 포함하는 자료를 찾는 **OR** 로직을 전환할 수 있습니다.

---

## 4. 세션 관리 (Session Management)

실제 수업이 이루어지는 개별 '세션' 단위의 운영 및 출결, 과제 관리를 담당합니다.

### 4.1 다중 캘린더 뷰
*   **월간(Month) 뷰:** 한 달간의 전체 수업 일정을 요약 확인합니다.
*   **주간(Week) 뷰:** 시간대별 수업 겹침을 고려한 타임라인 뷰를 제공합니다. (자동 레이아웃 알고리즘 적용)
*   **일간(Day) 뷰:** 특정 날짜의 수업을 시간순으로 상세히 확인합니다.
*   **모바일 아젠다:** 모바일 환경에 최적화된 리스트 형태의 일일 수업 스케줄러를 제공합니다.

### 4.2 출석 관리 (Attendance)
*   **실시간 체크:** 세션 참여 학생들의 출석/결석 상태를 즉시 기록합니다.
*   **일괄 처리:** '전체 출석 처리' 버튼을 통해 빠른 출결 확인이 가능합니다.

### 4.3 과제 부여 및 관리 (Assignments)
*   **과제 부여:** 특정 세션에 참여하는 학생들에게 라이브러리의 문제를 과제로 할당합니다. 이때 세션 태그와 일치하는 과제를 우선 추천합니다.
*   **마감일 설정:** 과제별 제출 마감 기한을 지정하며, 기한 초과 시 미제출 상태가 강조됩니다.
*   **학생별/과제별 보기 전환:** 
    *   **학생별:** 한 학생이 이 세션에서 해야 할 모든 과제 현황을 확인합니다.
    *   **과제별:** 특정 과제에 대해 전체 수강생의 제출 및 채점 현황을 확인합니다.
*   **수동 채점:** 주관식이나 오프라인 과제의 경우 교사가 직접 점수를 입력하고 채점 완료 상태로 변경할 수 있습니다.

### 4.4 수업 자료 연동 (Materials)
*   **자료 연결:** 수업에 필요한 강의 자료나 참고 문헌을 세션에 연결하여 학생과 교사가 공유합니다.
*   **태그 추천:** 세션에 설정된 태그와 일치하는 자료를 우선적으로 노출하여 자료 검색 시간을 단축합니다.

---

## 5. 학습 자료 및 과제 시스템 (Learning Materials & Assignments)

학습 자료와 과제는 시스템의 핵심 콘텐츠로, 효율적인 학습과 평가를 지원합니다.

### 5.1 자료 유형 분류

시스템은 두 가지 주요 자료 유형을 지원합니다:

*   **학습 자료 (Learning Materials)**: 수업 내용, 참고 자료, 강의 노트 등
*   **숙제/과제 (Assignments)**: 학생이 제출하고 평가받는 문제
    *   **일반 과제**: 다지선다형, 주관식, 서술형
    *   **코딩 과제**: 프로그래밍 문제 및 자동 채점

---

### 5.2 학습 자료 (Learning Materials)

#### 5.2.1 자료 작성 방식

교사는 다양한 방식으로 학습 자료를 작성하고 관리할 수 있습니다:

*   **Rich Text Editor (WYSIWYG)**
    *   블록 기반 에디터 (TipTap, Lexical, 또는 Notion-style)
    *   이미지, 표, 코드 블록, 수식 삽입 지원
    *   실시간 프리뷰 제공

*   **Markdown 파일 업로드**
    *   `.md` 파일을 드래그 앤 드롭으로 업로드
    *   자동으로 렌더링되어 뷰어에 표시
    *   코드 하이라이팅, 수식(KaTeX) 자동 지원

*   **Markdown 직접 작성**
    *   내장 Markdown 에디터에서 직접 작성
    *   실시간 프리뷰 (Split View)
    *   템플릿 제공 (수학, 과학, 영어 등)

#### 5.2.2 YouTube 동영상 연동

*   **링크 연결**: YouTube URL을 입력하면 자동으로 임베드
*   **배치 규칙**:
    *   YouTube 플레이어가 자료 최상단에 표시
    *    16:9 반응형 비율 유지
    *   하단에 학습 자료 본문 렌더링
*   **재생 옵션**:
    *   자동 재생 여부 설정
    *   특정 시작 시간 지정 가능

#### 5.2.3 학습 자료 뷰어 (Viewer Mode)

학생과 교사가 자료를 열람할 때 최적화된 읽기 환경을 제공합니다:

*   **깔끔한 읽기 모드**
    *   편집 도구 숨김
    *   목차 자동 생성 (헤딩 기반)
    *   다크 모드 / 라이트 모드 전환

*   **진행 상황 추적**
    *   학생별 자료 열람 여부 기록
    *   마지막 읽은 위치 저장 (선택)
    *   완료 체크 기능

*   **인쇄 및 다운로드**
    *   PDF 내보내기
    *   Markdown 원본 다운로드

#### 5.2.4 편집 모드 (Editor Mode)

교사가 자료를 수정할 때 사용하는 작성 환경:

*   **버전 관리**
    *   자동 저장 (30초마다)
    *   수정 이력 저장 (최근 10개)
    *   이전 버전으로 복원 기능

*   **협업 기능 (선택)**
    *   다른 교사와 공동 편집 권한 부여
    *   댓글 및 피드백 기능

---

### 5.3 과제 시스템 - 일반 과제

#### 5.3.1 다지선다형 (Multiple Choice)

*   **문제 구성**
    *   문제 본문 (Rich Text 또는 Markdown)
    *   2~10개의 선택지
    *   이미지/코드 블록 포함 가능

*   **정답 설정**
    *   **단일 정답**: 1개의 선택지만 정답
    *   **복수 정답**: 여러 선택지가 모두 정답 (예: 1번과 3번)
    *   **부분 점수**: 복수 정답 중 일부만 맞춘 경우 부분 점수 부여 옵션

*   **자동 채점**
    *   학생 제출 시 즉시 채점
    *   정답/오답 표시
    *   해설 자동 표시 (교사가 작성한 경우)

#### 5.3.2 주관식 (Short Answer)

*   **문제 구성**
    *   문제 본문
    *   텍스트 입력 필드 (단답형)

*   **정답 설정**
    *   **복수 정답 지원**: 동의어, 다양한 표현 모두 인정
        *   예: "서울", "seoul", "SEOUL" 모두 정답 처리
    *   **대소문자 구분 옵션**
    *   **공백 무시 옵션**

*   **자동 채점**
    *   정확히 일치하는 답만 정답 처리 (기본)
    *   정규 표현식 지원 (고급 옵션)
    *   수치 답안의 경우 오차 범위 설정 (예: ±0.1)

#### 5.3.3 서술형 (Essay / Long Answer)

*   **문제 구성**
    *   문제 본문
    *   텍스트 에디터 (Rich Text 또는 Markdown)
    *   최소/최대 글자 수 제한 설정 가능

*   **채점 기준표 (Rubric)**
    *   교사가 채점 기준을 미리 작성
    *   복수 평가 항목 설정 가능
        *   예: "내용 이해도 (40점)", "논리성 (30점)", "표현력 (30점)"
    *   각 항목별 배점 및 평가 기준 명시

*   **교사 수동 채점**
    *   학생 제출물 열람
    *   각 평가 항목별 점수 입력
    *   종합 피드백 작성
    *   채점 완료 후 학생에게 알림

*   **AI 채점 보조 (향후 확장)**
    *   키워드 기반 자동 점수 추천
    *   유사도 분석 (표절 방지)

---

### 5.4 과제 시스템 - 코딩 과제

#### 5.4.1 코딩 문제 구성

*   **문제 설명**
    *   문제 제목 및 본문
    *   입력/출력 형식 설명
    *   예제 입력/출력 (복수 개)
    *   제약 조건 (시간 제한, 메모리 제한)

*   **지원 언어**
    *   Python, JavaScript, Java, C++, C 등
    *   학생이 언어 선택 가능

#### 5.4.2 코드 작성 환경

*   **내장 코드 에디터**
    *   Monaco Editor (VS Code와 동일한 엔진)
    *   문법 하이라이팅
    *   자동 완성, 린팅
    *   테마 선택 (VS Code Dark, Light 등)

*   **실시간 실행 및 테스트**
    *   "실행" 버튼으로 예제 테스트
    *   표준 입력/출력 지원
    *   실행 결과 즉시 표시

#### 5.4.3 자동 채점 시스템

*   **테스트 케이스 기반 채점**
    *   교사가 미리 작성한 테스트 케이스 (입력/출력 쌍)
    *   공개 테스트 케이스: 학생이 볼 수 있음
    *   비공개 테스트 케이스: 제출 후 채점용

*   **채점 프로세스**
    1. 학생 코드 제출
    2. 샌드박스 환경에서 코드 실행
    3. 각 테스트 케이스 통과 여부 확인
    4. 통과한 케이스 개수 기반 점수 산정
    5. 실행 시간/메모리 사용량 측정

*   **결과 피드백**
    *   각 테스트 케이스별 성공/실패 표시
    *   실패 시 실행 결과 및 에러 메시지 제공
    *   실행 시간 통계

*   **보안 및 제한**
    *   샌드박스 격리 실행 (Docker 또는 Judge0 API)
    *   파일 시스템 접근 차단
    *   네트워크 접근 차단
    *   CPU/메모리 제한

#### 5.4.4 코드 리뷰 (선택 기능)

*   교사가 제출된 코드를 직접 리뷰
*   라인별 코멘트 기능
*   코드 품질 피드백

---

### 5.5 학습 자료 관리 시스템

#### 5.5.1 이중 관리 구조

학습 자료는 **태그 기반 관리**와 **폴더 구조 뷰**를 동시에 제공합니다.

**A. 태그 기반 관리 (백엔드 실제 저장 방식)**
*   모든 자료는 데이터베이스에 평면 구조로 저장
*   각 자료에 복수의 태그 할당
*   태그 조합으로 검색 및 필터링

**B. 폴더 구조 뷰 (사용자 인터페이스)**
*   윈도우 탐색기와 유사한 폴더/파일 트리 구조
*   사용자 편의를 위한 시각적 계층 구조 제공
*   실제 폴더가 아닌 "가상 폴더" (태그 기반 자동 그룹핑)

#### 5.5.2 폴더 구조 뷰 상세 기능

*   **폴더 생성 및 관리**
    *   새 폴더 생성 (실제로는 태그 생성)
    *   폴더 이름 변경
    *   폴더 삭제 (내부 자료는 유지)
    *   드래그 앤 드롭으로 자료 이동

*   **계층 구조**
    *   최대 3-4단계 깊이 권장
    *   예시 구조:
        ```
        📁 수학
          📁 초등
            📁 기초 연산
              📄 덧셈과 뺄셈
              📄 곱셈 구구단
            📁 도형
              📄 도형의 넓이
          📁 중등
            📁 방정식
              📄 일차방정식
        📁 영어
          📁 문법
          📁 독해
        ```

*   **폴더-태그 매핑**
    *   각 폴더는 하나 이상의 태그와 연결
    *   예: "수학 > 초등 > 기초 연산" 폴더 = 태그 ["수학", "초등", "기초연산"]
    *   자료를 폴더에 넣으면 해당 태그들이 자동 할당

#### 5.5.3 자료 검색 및 필터링

*   **통합 검색**
    *   제목, 본문 내용 검색
    *   작성자 검색
    *   태그 필터링

*   **정렬 옵션**
    *   최신순 / 오래된 순
    *   이름순 (가나다, ABC)
    *   사용 빈도순

*   **즐겨찾기**
    *   자주 사용하는 자료 즐겨찾기 추가
    *   빠른 접근 사이드바

#### 5.5.4 자료 복사 및 공유

*   **자료 복제**
    *   기존 자료를 복사하여 새 자료 생성
    *   수정하여 재사용

*   **다른 교사와 공유**
    *   읽기 전용 공유
    *   편집 권한 공유 (공동 작업)

*   **학생에게 공개**
    *   세션에 연결된 자료는 자동 공개
    *   개별 학생/그룹에게 직접 공유 가능

#### 5.5.5 자료 통계

*   **사용 현황 추적**
    *   자료별 조회 수
    *   세션 연결 횟수
    *   학생 열람 완료율

*   **인기 자료 대시보드**
    *   가장 많이 사용된 자료 TOP 10
    *   최근 추가된 자료
    *   아직 사용되지 않은 자료 (정리 대상)

---

### 5.6 과제 제출 및 평가 플로우

#### 5.6.1 학생 제출 프로세스

1. **과제 확인**
   *   대시보드에서 미제출 과제 확인
   *   마감일까지 남은 시간 표시

2. **과제 작성**
   *   다지선다/주관식: 답안 선택 및 입력
   *   서술형: 에디터에서 작성
   *   코딩: 코드 에디터에서 작성 및 테스트

3. **임시 저장**
   *   작성 중인 내용 자동 저장
   *   언제든지 돌아와서 계속 작성 가능

4. **최종 제출**
   *   "제출" 버튼 클릭
   *   제출 확인 모달 (재제출 불가 경고)
   *   제출 완료 시 알림

#### 5.6.2 교사 채점 프로세스

1. **제출 현황 확인**
   *   과제별 제출률 대시보드
   *   미제출 학생 리스트

2. **자동 채점**
   *   다지선다/주관식: 즉시 채점 완료
   *   결과 자동 집계

3. **수동 채점 (서술형/코딩)**
   *   학생별 제출물 열람
   *   채점 기준표 참고
   *   점수 입력 및 피드백 작성

4. **결과 공개**
   *   채점 완료 후 학생에게 알림
   *   점수 및 피드백 확인 가능

---

### 5.7 과제 라이브러리

교사가 작성한 과제를 재사용하기 위한 저장소입니다.

*   **과제 템플릿**
    *   자주 사용하는 문제 유형을 템플릿으로 저장
    *   새 과제 작성 시 템플릿 선택하여 빠르게 생성

*   **과제 은행 (Question Bank)**
    *   모든 과제를 중앙 집중식으로 관리
    *   태그별 분류
    *   난이도별 분류 (초급/중급/고급)

*   **세션 연결 시 자동 추천**
    *   세션의 태그와 일치하는 과제 우선 표시
    *   과거 동일 클래스에서 사용한 과제 추천

---

## 6. 권한 관리 시스템 (Role-based Permission System)

시스템 보안과 효율적인 운영을 위해 총 6단계의 역할 기반 접근 제어(RBAC)를 적용합니다.

### 6.1 권한 레벨별 정의

| 레벨 | 역할 | 설명 및 주요 권한 |
| :--- | :--- | :--- |
| **LV0** | **관리자** | **시스템 전체 제어:** 모든 데이터(교사, 학생, 태그, 설정)의 생성/수정/삭제 권한. |
| **LV1** | **수석교사** | **운영 총괄:** 원장 또는 관리직. 클래스 생성 및 복사, 태그 관리, 모든 학생 정보 열람 및 수정 권한. |
| **LV2** | **일반교사** | **수업 운영:** 담당 클래스의 세션 관리, 출결 체크, 과제 부여 및 채점, 수업 자료 등록 권한. (학생/클래스 삭제 불가) |
| **LV3** | **보조교사** | **수업 보조:** 담당 세션의 출결 체크 및 수업 자료 열람 권한. 시스템 설정 및 태그 관리 접근 제한. |
| **LV4** | **학생** | **학습 참여:** 본인의 수업 일정 확인, 과제 제출, 수업 자료 열람 권한. 타 학생 정보 접근 불가. |
| **LV5** | **학부모** | **모니터링:** 자녀의 출결 현황, 과제 수행 내역, 성적 리포트 열람 권한. 알림 설정 관리. |

### 6.2 주요 기능 접근 권한 매트릭스

| 기능 구분 | 기능명 | LV0/1 | LV2 | LV3 | LV4/5 |
| :--- | :--- | :---: | :---: | :---: | :---: |
| **태그 관리** | 태그 생성 / 삭제 | O | X | X | X |
| **클래스 관리** | 클래스 생성 / 복사 / 삭제 | O | X | X | X |
| **학생 관리** | 신규 학생 등록 / 삭제 | O | X | X | X |
| **수업 운영** | 세션 정보 수정 (장소 등) | O | O | X | X |
| | 출결 체크 및 수정 | O | O | O | X |
| | 수업 자료 연동 | O | O | O | X |
| **학습 자료** | 학습 자료 생성 / 수정 / 삭제 | O | O | X | X |
| | 학습 자료 열람 | O | O | O | O |
| | 폴더 구조 관리 | O | O | X | X |
| **과제 관리** | 과제 생성 / 수정 / 삭제 | O | O | X | X |
| | 과제 부여 (세션 연결) | O | O | X | X |
| | 과제 채점 (서술형/코딩) | O | O | X | X |
| | 과제 제출 | X | X | X | O (학생만) |
| | 과제 열람 | O | O | O | O |
| **데이터 조회** | 전체 원생/클래스 조회 | O | X | X | X |
| | 본인 관련 정보만 조회 | O | O | O | O |

*   **상위 권한 승계:** 상위 레벨은 하위 레벨의 모든 권한을 기본적으로 포함합니다.
*   **권한 테스트 기능:** 개발 및 관리 목적으로 헤더에서 현재 로그인 사용자의 권한 레벨을 실시간으로 변경하여 UI/UX를 테스트할 수 있습니다.
